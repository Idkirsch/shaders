<!DOCTYPE html> 
<html>
	<head>

		<script type="text/javascript" src="../initShaders.js"> </script>
		<script type="text/javascript" src="../MV.js"> </script>
		<script type="text/javascript" src="cubemap.js"></script>

		<script id="vertex-shader" type="x-shader/x-vertex">
		

			attribute vec4 a_Position;
			attribute vec4 a_Normal;
			varying vec4 v_Normal;
		
			attribute vec4 a_Color;
			varying vec4 v_Color;
			
			uniform mat4 ViewMatrix;
			uniform vec4 lightPos;
			// varying vec3 w_i; 


			varying vec2 fTexCoord;
			attribute vec2 aTexCoord; 


			void main(){
				v_Color = a_Color;
				v_Normal = normalize(a_Position);
		
				gl_PointSize = 10.0;
				gl_Position = ViewMatrix * a_Position;

				fTexCoord = aTexCoord;

				// nOW ITs working, but not doing anything
				vec3 w_i = lightPos.w == 0.0 ? normalize(-lightPos.xyz) : normalize(lightPos.xyz - gl_Position.xyz);
				


			}
			
		</script>

		<script type="x-shader/x-fragment" id="fragment-shader">
			precision mediump float;
			varying vec4 v_Color;
			uniform samplerCube texMap;
			varying vec2 fTexCoord;
			varying vec4 v_Normal;


			void main(){
				// gl_FragColor = v_Color;
				gl_FragColor = samplerCube(texMap, normalize(v_Normal));
				
			}
		</script>
	</head>

	<body> 
		<!-- <button id="ButtonCoarse">More coarse</button>
		<button id="ButtonFine">More fine</button> -->
		<!-- <button id="ButtonZ">Rotate Z</button> -->
		<canvas id ="c" height="512" width="512" /> 

	</body>
</html